# Backend

## ğŸš€ Getting Started

### 1. Install Dependencies

```bash
npm install
```

### 2. Environment Configuration

Create a `.env` file in the root of the backend folder with the following content:

```env
# MySQL
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=analisis_ia
DB_PORT=3306

# OpenAI
OPENAI_API_KEY=your_api_key

# Server
PORT=4000
```

### 3. Run the Server

For development (with auto-reload):
```bash
npx nodemon server.js
```

For production:
```bash
node server.js
```

---

## ğŸ—‚ï¸ Folder Structure

```
backend/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/         # DB and API configuration
â”‚   â”œâ”€â”€ controllers/    # API endpoints
â”‚   â”œâ”€â”€ models/         # Sequelize/MySQL models
â”‚   â”œâ”€â”€ services/       # Business logic
â”‚   â”œâ”€â”€ routes/         # API routes
â”‚   â”œâ”€â”€ middlewares/    # Validation, error handling, etc.
â”‚   â”œâ”€â”€ utils/          # Helper functions
â”‚   â”œâ”€â”€ uploads/        # Uploaded files
â”‚   â””â”€â”€ app.js          # Express configuration
â”‚
â”œâ”€â”€ tests/              # (Optional) Unit tests
â”œâ”€â”€ .env                # Environment variables
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸ› ï¸ Useful Scripts

- `npm run lint` â€” Run ESLint for code quality.
- `npm run prettier` â€” Format code with Prettier.

---

## ğŸ—„ï¸ Database Tables (MVP)

```sql
CREATE TABLE Submissions (
    submission_id INT AUTO_INCREMENT PRIMARY KEY,
    name_coder VARCHAR(100) NOT NULL,
    name_training VARCHAR(100) NOT NULL,
    file_url VARCHAR(255) NOT NULL
);

CREATE TABLE Analysis (
    analysis_id INT AUTO_INCREMENT PRIMARY KEY,
    submission_id INT NOT NULL UNIQUE,
    ia_percentage DECIMAL(5,2) NOT NULL,
    ia_detected BOOLEAN DEFAULT 0,
    explanation TEXT,
    FOREIGN KEY (submission_id) REFERENCES Submissions(submission_id)
        ON DELETE CASCADE
);

CREATE TABLE Feedbacks (
    feedback_id INT AUTO_INCREMENT PRIMARY KEY,
    analysis_id INT NOT NULL UNIQUE,
    comment TEXT,
    FOREIGN KEY (analysis_id) REFERENCES Analysis(analysis_id)
        ON DELETE CASCADE
);
```

---

## ğŸ§© Dependencies

- express
- multer
- mysql2
- sequelize
- dotenv
- axios
- openai

### Dev Dependencies

- nodemon
- eslint
- prettier

---

## ğŸ’¡ Notes

- Make sure your MySQL server is running and accessible.
- The OpenAI API key is required for AI analysis features.
- Uploaded files are stored in `src/uploads/`.

---

Let me know if you want to add instructions for the frontend or integration details!
