# Backend

## Instala dependencias

    npm init -y
    npm install express multer mysql2 sequelize dotenv axios openai
    npm install --save-dev nodemon eslint prettier

## ğŸ—‚ï¸ Estructura de Carpetas

    project-root/
    â”‚
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ config/              # ConfiguraciÃ³n de DB y API
    â”‚   â”œâ”€â”€ controllers/         # Controladores (endpoints)
    â”‚   â”œâ”€â”€ models/              # Modelos Sequelize/MySQL
    â”‚   â”œâ”€â”€ services/            # LÃ³gica de negocio
    â”‚   â”œâ”€â”€ routes/              # Rutas API
    â”‚   â”œâ”€â”€ middlewares/         # Validaciones, errores, etc.
    â”‚   â”œâ”€â”€ utils/               # Funciones de ayuda
    â”‚   â”œâ”€â”€ uploads/             # Archivos subidos (system files)
    â”‚   â””â”€â”€ app.js               # ConfiguraciÃ³n Express
    â”‚
    â”œâ”€â”€ tests/                   # (Opcional) Unit tests
    â”œâ”€â”€ .env                     # Variables de entorno
    â”œâ”€â”€ package.json
    â””â”€â”€ README.md

## âš™ï¸ ConfiguraciÃ³n de entorno

Creado un archivo .env en la raÃ­z con:

    # MySQL
    DB_HOST=localhost
    DB_USER=root
    DB_PASSWORD=tu_password
    DB_NAME=analisis_ia
    DB_PORT=3306

    # OpenAI
    OPENAI_API_KEY=tu_api_key

    # Servidor
    PORT=4000

## Tabla usada para el MVP

    CREATE TABLE Submission (
        submission_id INT AUTO_INCREMENT PRIMARY KEY,
        name_coder VARCHAR(100) NOT NULL,
        name_training VARCHAR(100) NOT NULL,
        file_url VARCHAR(255) NOT NULL
    );

    CREATE TABLE Analysis (
        analysis_id INT AUTO_INCREMENT PRIMARY KEY,
        submission_id INT NOT NULL UNIQUE,
        ia_percentage DECIMAL(5,2) NOT NULL,
        ia_detected BOOLEAN DEFAULT 0,
        explanation TEXT,
        FOREIGN KEY (submission_id) REFERENCES Submission(submission_id)
            ON DELETE CASCADE
    );

    CREATE TABLE Feedback (
        feedback_id INT AUTO_INCREMENT PRIMARY KEY,
        analysis_id INT NOT NULL UNIQUE,
        comment TEXT,
        FOREIGN KEY (analysis_id) REFERENCES Analysis(analysis_id)
            ON DELETE CASCADE
    );
